Отчет по лабораторной работе №2

Задание №1
Диски в системе:
<img src="https://i.ibb.co/RBr4mpy/1.jpg" alt="Изображение не загрузилось">

Проверим проинициализирован ли RAID массив корректно cat /proc/mdstat, 
в этом файле отражается текущее состояние RAID-массива.
<img src="https://i.ibb.co/Mf4twbd/2.jpg" alt="Изображение не загрузилось">

Результат: мы создали виртуальную машину с дисками ssd1 и ssd2, настроили LVM(Logical Volume Manager), RAID.

Задание №2
Копируем таблицу разделов со старого диска на новый: 
sfdisk -d /dev/sda | sfdisk /dev/sdb:
<img src="https://i.ibb.co/zXfwq1S/3.jpg" alt="Изображение не загрузилось">

Добавляем в RAID-массив новый диск: mdadm —manage /dev/md0 —add /dev/sdb:
<img src="https://i.ibb.co/C1hfcj8/4-2.jpg" alt="Изображение не загрузилось"> 
Результат: мы проэмулировали отказ одного из дисков, удалили диск ssd1, сохранён диск ssd2, добавлен диск ssd3.

Задание №3
Копируем файловую таблицу со старого диска на новый: sfdisk -d /dev/sda | sfdisk /dev/sdb:
<img src="https://i.ibb.co/QYKq0fS/5.jpg" alt="Изображение не загрузилось"> 

Обратите внимание, в sdb появились sdb1 и sdb2
<img src="https://i.ibb.co/0sqG74G/6.jpg" alt="Изображение не загрузилось"> 

Устанавливаем загрузчик на новый диск sdb: grub-install /dev/sdb - это загрузчик, который загружает нашу операционную систему, и он нам нужен на новом диске после удаления старого.

В итоге у нас установлен новый RAID-массив md63, проверяем при помощи команды cat /proc/mdstat:

<img src="https://i.ibb.co/0rysZnq/md63.jpg" alt="Изображение не загрузилось"> 


Настраиваем LVM(Logical Volume Manager)
Создаём новый физический том, включив в него ранее созданный RAID-массив: pvcreate /dev/md63
<img src="https://i.ibb.co/Q9zQpzH/md633.jpg" alt="Изображение не загрузилось"> 

Увеличим размер Volume Group system: vgextend system /dev/sda

Выполнили перемещение данных со старого диска на новый, теперь все данные находятся на одном диске:
<img src="https://i.ibb.co/Fz4432G/11-sdb2md63.jpg" alt="Изображение не загрузилось">  

Сначала изменили размер второго раздела диска ssd5 (sdb), затем перечитали таблицу разделов и провели результат:
ssd5
<img src="https://i.ibb.co/4JCY0qx/12-ssd5.jpg" alt="Изображение не загрузилось">  

Расширяем размер RAID
<img src="https://i.ibb.co/7JkkQ9J/16-R.jpg" alt="Изображение не загрузилось">

Увеличили объём памяти ssd4, ssd5.

Завершили миграцию основного массива на новые диски, работа с ssd4 и ssd5 закончена.
<img src="https://i.ibb.co/wdh0sxk/18.jpg" alt="Изображение не загрузилось">


Переносим данные логов со старого раздела на новый:
<img src="https://i.ibb.co/mXS1HBT/20.jpg" alt="Изображение не загрузилось">

Правим /etc/fstab, поправляем устройство system-log на data-var_log:
<img src="https://i.ibb.co/Zz6Ty6F/21.jpg" alt="Изображение не загрузилось">

Изменяем таблицу разделов командой: resize2fs
<img src="https://i.ibb.co/MNNqCHG/22.jpg" alt="Изображение не загрузилось">


Что было сделано: замена дисков на лету, с добавлением новых дисков и переносом разделов.
